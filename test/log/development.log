  [1m[36m (69.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (61.2ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateVersions (20151203152020)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (81.8ms)[0m  [1mCREATE TABLE "versions" ("id" serial primary key, "item_type" character varying NOT NULL, "item_id" integer NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp) [0m
  [1m[35m (28.4ms)[0m  CREATE  INDEX  "index_versions_on_item_type_and_item_id" ON "versions"  ("item_type", "item_id")
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151203152020"]]
  [1m[35m (32.7ms)[0m  COMMIT
Migrating to CreateDelayedJobs (20151203154714)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (80.0ms)[0m  CREATE TABLE "delayed_jobs" ("id" serial primary key, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" timestamp, "locked_at" timestamp, "failed_at" timestamp, "locked_by" character varying, "queue" character varying, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (40.1ms)[0m  [1mCREATE  INDEX  "delayed_jobs_priority" ON "delayed_jobs"  ("priority", "run_at")[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151203154714"]]
  [1m[36m (22.1ms)[0m  [1mCOMMIT[0m
Migrating to SorceryCore (20151204090515)
  [1m[35m (0.3ms)[0m  BEGIN
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /home/oag2/Ruby on Rails/base_app_m-master/db/migrate/20151204090515_sorcery_core.rb:8)
  [1m[36m (116.7ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying NOT NULL, "crypted_password" character varying, "salt" character varying, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (40.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090515"]]
  [1m[35m (10.4ms)[0m  COMMIT
Migrating to SorceryRememberMe (20151204090516)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "users" ADD "remember_me_token" character varying
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "users" ADD "remember_me_token_expires_at" timestamp[0m
  [1m[35m (56.2ms)[0m  CREATE  INDEX  "index_users_on_remember_me_token" ON "users"  ("remember_me_token")
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090516"]]
  [1m[35m (20.1ms)[0m  COMMIT
Migrating to SorceryResetPassword (20151204090517)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "users" ADD "reset_password_token" character varying
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD "reset_password_token_expires_at" timestamp[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "users" ADD "reset_password_email_sent_at" timestamp
  [1m[36m (55.5ms)[0m  [1mCREATE  INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090517"]]
  [1m[36m (21.0ms)[0m  [1mCOMMIT[0m
Migrating to SorceryUserActivation (20151204090518)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "users" ADD "activation_state" character varying[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "users" ADD "activation_token" character varying
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD "activation_token_expires_at" timestamp[0m
  [1m[35m (53.1ms)[0m  CREATE  INDEX  "index_users_on_activation_token" ON "users"  ("activation_token")
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090518"]]
  [1m[35m (19.6ms)[0m  COMMIT
Migrating to SorceryBruteForceProtection (20151204090519)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (321.4ms)[0m  ALTER TABLE "users" ADD "failed_logins_count" integer DEFAULT 0
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "users" ADD "lock_expires_at" timestamp[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "users" ADD "unlock_token" character varying
  [1m[36m (48.6ms)[0m  [1mCREATE  INDEX  "index_users_on_unlock_token" ON "users"  ("unlock_token")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090519"]]
  [1m[36m (16.7ms)[0m  [1mCOMMIT[0m
Migrating to SorceryActivityLogging (20151204090520)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "users" ADD "last_login_at" timestamp[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "last_logout_at" timestamp
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD "last_activity_at" timestamp[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD "last_login_from_ip_address" character varying
  [1m[36m (38.5ms)[0m  [1mCREATE  INDEX  "index_users_on_last_logout_at_and_last_activity_at" ON "users"  ("last_logout_at", "last_activity_at")[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090520"]]
  [1m[36m (15.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateRoles (20170409204945)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (98.5ms)[0m  [1mCREATE TABLE "roles" ("id" serial primary key, "name" character varying NOT NULL, "info" character varying NOT NULL, "full_info" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (32.9ms)[0m  CREATE UNIQUE INDEX  "index_roles_on_name" ON "roles"  ("name")
  [1m[36m (29.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_roles_on_info" ON "roles"  ("info")[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170409204945"]]
  [1m[36m (24.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateRoleUsers (20170409205031)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (91.8ms)[0m  [1mCREATE TABLE "role_users" ("id" serial primary key, "role_id" integer NOT NULL, "user_id" integer NOT NULL, "data" json, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (61.6ms)[0m  CREATE  INDEX  "index_role_users_on_role_id" ON "role_users"  ("role_id")
  [1m[36m (41.1ms)[0m  [1mCREATE  INDEX  "index_role_users_on_user_id" ON "role_users"  ("user_id")[0m
  [1m[35m (3.9ms)[0m  ALTER TABLE "role_users" ADD CONSTRAINT "fk_rails_d517f3214f"
FOREIGN KEY ("role_id")
  REFERENCES "roles" ("id")

  [1m[36m (2.5ms)[0m  [1mALTER TABLE "role_users" ADD CONSTRAINT "fk_rails_d225876829"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170409205031"]]
  [1m[36m (16.6ms)[0m  [1mCOMMIT[0m
Migrating to AddBirthdayToUser (20170501085108)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mALTER TABLE "users" ADD "birthday" date[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170501085108"]]
  [1m[36m (4.6ms)[0m  [1mCOMMIT[0m
Migrating to CreateDepartments (20170519175107)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (70.2ms)[0m  [1mCREATE TABLE "departments" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175107"]]
  [1m[36m (23.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkers (20170519175219)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (70.7ms)[0m  [1mCREATE TABLE "workers" ("id" serial primary key, "sn" character varying, "fn" character varying, "ln" character varying, "passport" character varying, "inn" character varying, "birthday" date, "position" character varying, "department_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (29.4ms)[0m  CREATE  INDEX  "index_workers_on_department_id" ON "workers"  ("department_id")
  [1m[36m (2.7ms)[0m  [1mALTER TABLE "workers" ADD CONSTRAINT "fk_rails_a707a1612d"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175219"]]
  [1m[36m (18.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateProjects (20170519175231)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (119.7ms)[0m  [1mCREATE TABLE "projects" ("id" serial primary key, "name" character varying, "start" date, "end" date, "price" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175231"]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkerProjects (20170519175250)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (50.3ms)[0m  [1mCREATE TABLE "worker_projects" ("id" serial primary key, "worker_id" integer, "project_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (29.9ms)[0m  CREATE  INDEX  "index_worker_projects_on_worker_id" ON "worker_projects"  ("worker_id")
  [1m[36m (41.6ms)[0m  [1mCREATE  INDEX  "index_worker_projects_on_project_id" ON "worker_projects"  ("project_id")[0m
  [1m[35m (2.5ms)[0m  ALTER TABLE "worker_projects" ADD CONSTRAINT "fk_rails_7c9f8f33e0"
FOREIGN KEY ("worker_id")
  REFERENCES "workers" ("id")

  [1m[36m (2.1ms)[0m  [1mALTER TABLE "worker_projects" ADD CONSTRAINT "fk_rails_c5fb282d59"
FOREIGN KEY ("project_id")
  REFERENCES "projects" ("id")
[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175250"]]
  [1m[36m (14.6ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (5.0ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'delayed_jobs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'departments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'projects'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.9ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'role_users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'roles'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.8ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'versions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'worker_projects'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'workers'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.6ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT 1[0m  [["email", "admin@localhost"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('admin@localhost') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("email", "salt", "crypted_password", "created_at", "updated_at", "activation_token", "activation_state") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["email", "admin@localhost"], ["salt", "BdpvfxRs16BtGRnA1RBp"], ["crypted_password", "$2a$10$sf8q.imMr2cOIltFd4RsE.yKFpi4Gc7dZJlwvTmBbJKN2H5HF7v5K"], ["created_at", "2017-05-19 17:53:15.400486"], ["updated_at", "2017-05-19 17:53:15.400486"], ["activation_token", "5NpxHd81WvM6vs1GAZ5W"], ["activation_state", "pending"]]
  Rendered user_mailer/activation_needed_email.html.haml within layouts/mailer (11.1ms)
  Rendered user_mailer/activation_needed_email.text.haml within layouts/mailer (3.9ms)

UserMailer#activation_needed_email: processed outbound mail in 401.0ms

Sent mail to admin@localhost (25.4ms)
Date: Fri, 19 May 2017 20:53:15 +0300
From: from@example.com
To: admin@localhost
Message-ID: <591f310bcc1a3_3a4d2ab98789f970211c0@oag2-Lenovo-G505s.mail>
Subject: Welcome to My Awesome Site
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f310bc72cf_3a4d2ab98789f97021032";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f310bc72cf_3a4d2ab98789f97021032
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Welcome to example.com,
admin@localhost
You have successfully signed up to example.com,
your username is:
admin@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/5NpxHd81WvM6vs1GAZ5W/activate.
Thanks for joining and have a great day!


----==_mimepart_591f310bc72cf_3a4d2ab98789f97021032
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Welcome to example.com,
admin@localhost
You have successfully signed up to example.com,
your username is:
admin@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/5NpxHd81WvM6vs1GAZ5W/activate.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f310bc72cf_3a4d2ab98789f97021032--

  [1m[36m (190.6ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: The method `login_path` cannot be used here as a full URL is required. Use `login_url` instead. (called from activation_success_email at /home/oag2/Ruby on Rails/base_app_m-master/app/mailers/user_mailer.rb:11)
  Rendered user_mailer/activation_success_email.html.haml within layouts/mailer (3.1ms)
  Rendered user_mailer/activation_success_email.text.haml within layouts/mailer (2.9ms)

UserMailer#activation_success_email: processed outbound mail in 25.4ms

Sent mail to admin@localhost (7.0ms)
Date: Fri, 19 May 2017 20:53:16 +0300
From: from@example.com
To: admin@localhost
Message-ID: <591f310c101e0_3a4d2ab98789f970213e2@oag2-Lenovo-G505s.mail>
Subject: Your account is now activated
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f310cf152_3a4d2ab98789f9702121d";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f310cf152_3a4d2ab98789f9702121d
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Congratz,
admin@localhost
You have successfully activated your example.com account,
your username is:
admin@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!


----==_mimepart_591f310cf152_3a4d2ab98789f9702121d
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Congratz,
admin@localhost
You have successfully activated your example.com account,
your username is:
admin@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f310cf152_3a4d2ab98789f9702121d--

  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "users" SET "activation_token" = $1, "activation_state" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["activation_token", nil], ["activation_state", "active"], ["updated_at", "2017-05-19 17:53:16.072543"], ["id", 1]]
  [1m[35m (17.5ms)[0m  COMMIT
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT 1[0m  [["email", "user@localhost"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@localhost') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("email", "salt", "crypted_password", "created_at", "updated_at", "activation_token", "activation_state") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["email", "user@localhost"], ["salt", "6Ay2dj52Ecj9o-K8Byr9"], ["crypted_password", "$2a$10$t/zhgliaeAxpRuLfdr16sei11jzCkCNbd4DFgAhLb5GrcuoTEUXUy"], ["created_at", "2017-05-19 17:53:16.309371"], ["updated_at", "2017-05-19 17:53:16.309371"], ["activation_token", "ycz6LxgtnfTJj-Uj2xtP"], ["activation_state", "pending"]]
  Rendered user_mailer/activation_needed_email.html.haml within layouts/mailer (0.2ms)
  Rendered user_mailer/activation_needed_email.text.haml within layouts/mailer (0.2ms)

UserMailer#activation_needed_email: processed outbound mail in 14.0ms

Sent mail to user@localhost (6.5ms)
Date: Fri, 19 May 2017 20:53:16 +0300
From: from@example.com
To: user@localhost
Message-ID: <591f310c5021b_3a4d2ab98789f97021583@oag2-Lenovo-G505s.mail>
Subject: Welcome to My Awesome Site
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f310c4eeee_3a4d2ab98789f970214f1";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f310c4eeee_3a4d2ab98789f970214f1
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Welcome to example.com,
user@localhost
You have successfully signed up to example.com,
your username is:
user@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/ycz6LxgtnfTJj-Uj2xtP/activate.
Thanks for joining and have a great day!


----==_mimepart_591f310c4eeee_3a4d2ab98789f970214f1
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Welcome to example.com,
user@localhost
You have successfully signed up to example.com,
your username is:
user@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/ycz6LxgtnfTJj-Uj2xtP/activate.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f310c4eeee_3a4d2ab98789f970214f1--

  [1m[36m (15.5ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: The method `login_path` cannot be used here as a full URL is required. Use `login_url` instead. (called from activation_success_email at /home/oag2/Ruby on Rails/base_app_m-master/app/mailers/user_mailer.rb:11)
  Rendered user_mailer/activation_success_email.html.haml within layouts/mailer (0.2ms)
  Rendered user_mailer/activation_success_email.text.haml within layouts/mailer (0.1ms)

UserMailer#activation_success_email: processed outbound mail in 16.6ms

Sent mail to user@localhost (7.2ms)
Date: Fri, 19 May 2017 20:53:16 +0300
From: from@example.com
To: user@localhost
Message-ID: <591f310c5a365_3a4d2ab98789f97021764@oag2-Lenovo-G505s.mail>
Subject: Your account is now activated
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f310c58ff1_3a4d2ab98789f970216a5";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f310c58ff1_3a4d2ab98789f970216a5
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Congratz,
user@localhost
You have successfully activated your example.com account,
your username is:
user@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!


----==_mimepart_591f310c58ff1_3a4d2ab98789f970216a5
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Congratz,
user@localhost
You have successfully activated your example.com account,
your username is:
user@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f310c58ff1_3a4d2ab98789f970216a5--

  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "users" SET "activation_token" = $1, "activation_state" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["activation_token", nil], ["activation_state", "active"], ["updated_at", "2017-05-19 17:53:16.376382"], ["id", 2]]
  [1m[35m (3.2ms)[0m  COMMIT
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT  "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."info" = $2 AND "roles"."full_info" = $3 LIMIT 1[0m  [["name", "admin"], ["info", "Администратор"], ["full_info", "Администратор системы"]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mRole Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "roles" WHERE "roles"."name" = 'admin' LIMIT 1[0m
  [1m[35mRole Exists (0.6ms)[0m  SELECT  1 AS one FROM "roles" WHERE "roles"."info" = 'Администратор' LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "roles" ("name", "info", "full_info", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["info", "Администратор"], ["full_info", "Администратор системы"], ["created_at", "2017-05-19 17:53:16.407190"], ["updated_at", "2017-05-19 17:53:16.407190"]]
  [1m[35m (5.4ms)[0m  COMMIT
  [1m[36mRole Load (0.6ms)[0m  [1mSELECT  "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."info" = $2 AND "roles"."full_info" = $3 LIMIT 1[0m  [["name", "operator"], ["info", "Оператор"], ["full_info", "Оператор"]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mRole Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "roles" WHERE "roles"."name" = 'operator' LIMIT 1[0m
  [1m[35mRole Exists (0.8ms)[0m  SELECT  1 AS one FROM "roles" WHERE "roles"."info" = 'Оператор' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "roles" ("name", "info", "full_info", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "operator"], ["info", "Оператор"], ["full_info", "Оператор"], ["created_at", "2017-05-19 17:53:16.423088"], ["updated_at", "2017-05-19 17:53:16.423088"]]
  [1m[35m (12.9ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "role_users" ("role_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["role_id", 1], ["user_id", 1], ["created_at", "2017-05-19 17:53:16.465812"], ["updated_at", "2017-05-19 17:53:16.465812"]]
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "role_users" ("role_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["role_id", 2], ["user_id", 2], ["created_at", "2017-05-19 17:53:16.473127"], ["updated_at", "2017-05-19 17:53:16.473127"]]
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (63.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (61.1ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateVersions (20151203152020)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (134.4ms)[0m  [1mCREATE TABLE "versions" ("id" serial primary key, "item_type" character varying NOT NULL, "item_id" integer NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp) [0m
  [1m[35m (51.6ms)[0m  CREATE  INDEX  "index_versions_on_item_type_and_item_id" ON "versions"  ("item_type", "item_id")
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151203152020"]]
  [1m[35m (20.1ms)[0m  COMMIT
Migrating to CreateDelayedJobs (20151203154714)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (99.9ms)[0m  CREATE TABLE "delayed_jobs" ("id" serial primary key, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" timestamp, "locked_at" timestamp, "failed_at" timestamp, "locked_by" character varying, "queue" character varying, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (40.3ms)[0m  [1mCREATE  INDEX  "delayed_jobs_priority" ON "delayed_jobs"  ("priority", "run_at")[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151203154714"]]
  [1m[36m (22.8ms)[0m  [1mCOMMIT[0m
Migrating to SorceryCore (20151204090515)
  [1m[35m (0.5ms)[0m  BEGIN
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /home/oag2/Ruby on Rails/base_app_m-master/db/migrate/20151204090515_sorcery_core.rb:8)
  [1m[36m (82.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying NOT NULL, "crypted_password" character varying, "salt" character varying, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (73.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090515"]]
  [1m[35m (21.6ms)[0m  COMMIT
Migrating to SorceryRememberMe (20151204090516)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "users" ADD "remember_me_token" character varying
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "remember_me_token_expires_at" timestamp[0m
  [1m[35m (56.7ms)[0m  CREATE  INDEX  "index_users_on_remember_me_token" ON "users"  ("remember_me_token")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090516"]]
  [1m[35m (21.0ms)[0m  COMMIT
Migrating to SorceryResetPassword (20151204090517)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "users" ADD "reset_password_token" character varying
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "reset_password_token_expires_at" timestamp[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "reset_password_email_sent_at" timestamp
  [1m[36m (56.6ms)[0m  [1mCREATE  INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090517"]]
  [1m[36m (20.1ms)[0m  [1mCOMMIT[0m
Migrating to SorceryUserActivation (20151204090518)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD "activation_state" character varying[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "activation_token" character varying
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "activation_token_expires_at" timestamp[0m
  [1m[35m (56.4ms)[0m  CREATE  INDEX  "index_users_on_activation_token" ON "users"  ("activation_token")
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090518"]]
  [1m[35m (19.7ms)[0m  COMMIT
Migrating to SorceryBruteForceProtection (20151204090519)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (309.4ms)[0m  ALTER TABLE "users" ADD "failed_logins_count" integer DEFAULT 0
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "lock_expires_at" timestamp[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "unlock_token" character varying
  [1m[36m (49.2ms)[0m  [1mCREATE  INDEX  "index_users_on_unlock_token" ON "users"  ("unlock_token")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090519"]]
  [1m[36m (19.7ms)[0m  [1mCOMMIT[0m
Migrating to SorceryActivityLogging (20151204090520)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD "last_login_at" timestamp[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD "last_logout_at" timestamp
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "last_activity_at" timestamp[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "last_login_from_ip_address" character varying
  [1m[36m (58.1ms)[0m  [1mCREATE  INDEX  "index_users_on_last_logout_at_and_last_activity_at" ON "users"  ("last_logout_at", "last_activity_at")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090520"]]
  [1m[36m (17.4ms)[0m  [1mCOMMIT[0m
Migrating to CreateRoles (20170409204945)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (133.4ms)[0m  [1mCREATE TABLE "roles" ("id" serial primary key, "name" character varying NOT NULL, "info" character varying NOT NULL, "full_info" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (52.1ms)[0m  CREATE UNIQUE INDEX  "index_roles_on_name" ON "roles"  ("name")
  [1m[36m (39.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_roles_on_info" ON "roles"  ("info")[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170409204945"]]
  [1m[36m (15.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateRoleUsers (20170409205031)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (111.7ms)[0m  [1mCREATE TABLE "role_users" ("id" serial primary key, "role_id" integer NOT NULL, "user_id" integer NOT NULL, "data" json, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.3ms)[0m  CREATE  INDEX  "index_role_users_on_role_id" ON "role_users"  ("role_id")
  [1m[36m (42.4ms)[0m  [1mCREATE  INDEX  "index_role_users_on_user_id" ON "role_users"  ("user_id")[0m
  [1m[35m (4.2ms)[0m  ALTER TABLE "role_users" ADD CONSTRAINT "fk_rails_d517f3214f"
FOREIGN KEY ("role_id")
  REFERENCES "roles" ("id")

  [1m[36m (2.8ms)[0m  [1mALTER TABLE "role_users" ADD CONSTRAINT "fk_rails_d225876829"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170409205031"]]
  [1m[36m (15.1ms)[0m  [1mCOMMIT[0m
Migrating to AddBirthdayToUser (20170501085108)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD "birthday" date[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170501085108"]]
  [1m[36m (4.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateDepartments (20170519175107)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (125.5ms)[0m  [1mCREATE TABLE "departments" ("id" serial primary key, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175107"]]
  [1m[36m (22.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkers (20170519175219)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (104.3ms)[0m  [1mCREATE TABLE "workers" ("id" serial primary key, "sn" character varying NOT NULL, "fn" character varying NOT NULL, "ln" character varying NOT NULL, "passport" character varying NOT NULL, "inn" character varying NOT NULL, "birthday" date NOT NULL, "position" character varying NOT NULL, "department_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (55.7ms)[0m  CREATE  INDEX  "index_workers_on_department_id" ON "workers"  ("department_id")
  [1m[36m (1.9ms)[0m  [1mALTER TABLE "workers" ADD CONSTRAINT "fk_rails_a707a1612d"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175219"]]
  [1m[36m (4.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateProjects (20170519175231)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (94.3ms)[0m  [1mCREATE TABLE "projects" ("id" serial primary key, "name" character varying NOT NULL, "start" date NOT NULL, "end" date NOT NULL, "price" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175231"]]
  [1m[36m (21.9ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkerProjects (20170519175250)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (61.3ms)[0m  [1mCREATE TABLE "worker_projects" ("id" serial primary key, "worker_id" integer NOT NULL, "project_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (73.4ms)[0m  CREATE  INDEX  "index_worker_projects_on_worker_id" ON "worker_projects"  ("worker_id")
  [1m[36m (30.3ms)[0m  [1mCREATE  INDEX  "index_worker_projects_on_project_id" ON "worker_projects"  ("project_id")[0m
  [1m[35m (2.8ms)[0m  ALTER TABLE "worker_projects" ADD CONSTRAINT "fk_rails_7c9f8f33e0"
FOREIGN KEY ("worker_id")
  REFERENCES "workers" ("id")

  [1m[36m (2.4ms)[0m  [1mALTER TABLE "worker_projects" ADD CONSTRAINT "fk_rails_c5fb282d59"
FOREIGN KEY ("project_id")
  REFERENCES "projects" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175250"]]
  [1m[36m (14.0ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (5.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'delayed_jobs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.0ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'departments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'projects'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.0ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'role_users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'roles'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.1ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'versions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (6.8ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'worker_projects'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (5.3ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'workers'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT 1[0m  [["email", "admin@localhost"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('admin@localhost') LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "users" ("email", "salt", "crypted_password", "created_at", "updated_at", "activation_token", "activation_state") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["email", "admin@localhost"], ["salt", "NYjYJNPNoFifx9r2QAyR"], ["crypted_password", "$2a$10$KghvrQJ01tYAMLvbHs49MessmA7ybMOyyDxSQNN7zW/PEqN.fdSAC"], ["created_at", "2017-05-19 18:09:53.910881"], ["updated_at", "2017-05-19 18:09:53.910881"], ["activation_token", "rPsahJzUwpWxsPrcneD_"], ["activation_state", "pending"]]
  Rendered user_mailer/activation_needed_email.html.haml within layouts/mailer (8.4ms)
  Rendered user_mailer/activation_needed_email.text.haml within layouts/mailer (3.2ms)

UserMailer#activation_needed_email: processed outbound mail in 353.2ms

Sent mail to admin@localhost (13.3ms)
Date: Fri, 19 May 2017 21:09:54 +0300
From: from@example.com
To: admin@localhost
Message-ID: <591f34f243cfc_3ef22b05ae06f96c513fe@oag2-Lenovo-G505s.mail>
Subject: Welcome to My Awesome Site
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f34f24173d_3ef22b05ae06f96c51253";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f34f24173d_3ef22b05ae06f96c51253
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Welcome to example.com,
admin@localhost
You have successfully signed up to example.com,
your username is:
admin@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/rPsahJzUwpWxsPrcneD_/activate.
Thanks for joining and have a great day!


----==_mimepart_591f34f24173d_3ef22b05ae06f96c51253
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Welcome to example.com,
admin@localhost
You have successfully signed up to example.com,
your username is:
admin@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/rPsahJzUwpWxsPrcneD_/activate.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f34f24173d_3ef22b05ae06f96c51253--

  [1m[36m (84.7ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: The method `login_path` cannot be used here as a full URL is required. Use `login_url` instead. (called from activation_success_email at /home/oag2/Ruby on Rails/base_app_m-master/app/mailers/user_mailer.rb:11)
  Rendered user_mailer/activation_success_email.html.haml within layouts/mailer (3.7ms)
  Rendered user_mailer/activation_success_email.text.haml within layouts/mailer (3.2ms)

UserMailer#activation_success_email: processed outbound mail in 22.7ms

Sent mail to admin@localhost (6.5ms)
Date: Fri, 19 May 2017 21:09:54 +0300
From: from@example.com
To: admin@localhost
Message-ID: <591f34f260ec7_3ef22b05ae06f96c515cf@oag2-Lenovo-G505s.mail>
Subject: Your account is now activated
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f34f25fd39_3ef22b05ae06f96c51446";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f34f25fd39_3ef22b05ae06f96c51446
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Congratz,
admin@localhost
You have successfully activated your example.com account,
your username is:
admin@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!


----==_mimepart_591f34f25fd39_3ef22b05ae06f96c51446
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Congratz,
admin@localhost
You have successfully activated your example.com account,
your username is:
admin@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f34f25fd39_3ef22b05ae06f96c51446--

  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "users" SET "activation_token" = $1, "activation_state" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["activation_token", nil], ["activation_state", "active"], ["updated_at", "2017-05-19 18:09:54.402923"], ["id", 1]]
  [1m[35m (7.9ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT 1[0m  [["email", "user@localhost"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@localhost') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "salt", "crypted_password", "created_at", "updated_at", "activation_token", "activation_state") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["email", "user@localhost"], ["salt", "aEG_Wk2Ui2TjdS-GSP5X"], ["crypted_password", "$2a$10$RS55aKZJhmJdPb9TO1cDP.tSwAWb.jMToKOpmwVd8o19XU7WBA/e."], ["created_at", "2017-05-19 18:09:54.624361"], ["updated_at", "2017-05-19 18:09:54.624361"], ["activation_token", "v8W5EpCqvBQsx45xdGVD"], ["activation_state", "pending"]]
  Rendered user_mailer/activation_needed_email.html.haml within layouts/mailer (0.2ms)
  Rendered user_mailer/activation_needed_email.text.haml within layouts/mailer (0.1ms)

UserMailer#activation_needed_email: processed outbound mail in 13.7ms

Sent mail to user@localhost (6.9ms)
Date: Fri, 19 May 2017 21:09:54 +0300
From: from@example.com
To: user@localhost
Message-ID: <591f34f29cdfc_3ef22b05ae06f96c517a3@oag2-Lenovo-G505s.mail>
Subject: Welcome to My Awesome Site
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f34f29baeb_3ef22b05ae06f96c5169a";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f34f29baeb_3ef22b05ae06f96c5169a
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Welcome to example.com,
user@localhost
You have successfully signed up to example.com,
your username is:
user@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/v8W5EpCqvBQsx45xdGVD/activate.
Thanks for joining and have a great day!


----==_mimepart_591f34f29baeb_3ef22b05ae06f96c5169a
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Welcome to example.com,
user@localhost
You have successfully signed up to example.com,
your username is:
user@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/v8W5EpCqvBQsx45xdGVD/activate.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f34f29baeb_3ef22b05ae06f96c5169a--

  [1m[36m (10.1ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: The method `login_path` cannot be used here as a full URL is required. Use `login_url` instead. (called from activation_success_email at /home/oag2/Ruby on Rails/base_app_m-master/app/mailers/user_mailer.rb:11)
  Rendered user_mailer/activation_success_email.html.haml within layouts/mailer (0.3ms)
  Rendered user_mailer/activation_success_email.text.haml within layouts/mailer (0.2ms)

UserMailer#activation_success_email: processed outbound mail in 17.7ms

Sent mail to user@localhost (6.8ms)
Date: Fri, 19 May 2017 21:09:54 +0300
From: from@example.com
To: user@localhost
Message-ID: <591f34f2a5fed_3ef22b05ae06f96c51934@oag2-Lenovo-G505s.mail>
Subject: Your account is now activated
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f34f2a474c_3ef22b05ae06f96c518d1";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f34f2a474c_3ef22b05ae06f96c518d1
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Congratz,
user@localhost
You have successfully activated your example.com account,
your username is:
user@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!


----==_mimepart_591f34f2a474c_3ef22b05ae06f96c518d1
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Congratz,
user@localhost
You have successfully activated your example.com account,
your username is:
user@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f34f2a474c_3ef22b05ae06f96c518d1--

  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "activation_token" = $1, "activation_state" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["activation_token", nil], ["activation_state", "active"], ["updated_at", "2017-05-19 18:09:54.685974"], ["id", 2]]
  [1m[35m (65.0ms)[0m  COMMIT
  [1m[36mRole Load (0.7ms)[0m  [1mSELECT  "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."info" = $2 AND "roles"."full_info" = $3 LIMIT 1[0m  [["name", "admin"], ["info", "Администратор"], ["full_info", "Администратор системы"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mRole Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "roles" WHERE "roles"."name" = 'admin' LIMIT 1[0m
  [1m[35mRole Exists (0.8ms)[0m  SELECT  1 AS one FROM "roles" WHERE "roles"."info" = 'Администратор' LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "roles" ("name", "info", "full_info", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["info", "Администратор"], ["full_info", "Администратор системы"], ["created_at", "2017-05-19 18:09:54.775413"], ["updated_at", "2017-05-19 18:09:54.775413"]]
  [1m[35m (13.7ms)[0m  COMMIT
  [1m[36mRole Load (0.9ms)[0m  [1mSELECT  "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."info" = $2 AND "roles"."full_info" = $3 LIMIT 1[0m  [["name", "operator"], ["info", "Оператор"], ["full_info", "Оператор"]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mRole Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "roles" WHERE "roles"."name" = 'operator' LIMIT 1[0m
  [1m[35mRole Exists (0.7ms)[0m  SELECT  1 AS one FROM "roles" WHERE "roles"."info" = 'Оператор' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "roles" ("name", "info", "full_info", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "operator"], ["info", "Оператор"], ["full_info", "Оператор"], ["created_at", "2017-05-19 18:09:54.800103"], ["updated_at", "2017-05-19 18:09:54.800103"]]
  [1m[35m (11.2ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "role_users" ("role_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["role_id", 1], ["user_id", 1], ["created_at", "2017-05-19 18:09:54.842312"], ["updated_at", "2017-05-19 18:09:54.842312"]]
  [1m[36m (12.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "role_users" ("role_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["role_id", 2], ["user_id", 2], ["created_at", "2017-05-19 18:09:54.861441"], ["updated_at", "2017-05-19 18:09:54.861441"]]
  [1m[35m (5.3ms)[0m  COMMIT


Started GET "/" for 127.0.0.1 at 2017-05-19 21:10:13 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by WelcomeController#index as HTML
  Rendered welcome/index.html.haml within layouts/application (9.6ms)
  Rendered application/_navbar_top.html.haml (14.3ms)
  Rendered application/_sidebar.html.haml (12.1ms)
  Rendered application/_flash_messages.html.haml (4.5ms)
Completed 200 OK in 11238ms (Views: 11198.9ms | ActiveRecord: 0.0ms)


Started GET "/assets/theme.self-c455751eb6d553c2ff08285b8344c15975a79e37cb7e17faafcabd342a611a00.css?body=1" for 127.0.0.1 at 2017-05-19 21:10:24 +0300


Started GET "/assets/turbolinks.self-c37727e9bd6b2735da5c311aa83fead54ed0be6cc8bd9a65309e9c5abe2cbfff.js?body=1" for 127.0.0.1 at 2017-05-19 21:10:24 +0300


Started GET "/assets/role_users.self-1878dd443f16e8cfe65a1150cdfbb48d9d1fde90d019b6ad8407f7db197b2934.js?body=1" for 127.0.0.1 at 2017-05-19 21:10:24 +0300


Started GET "/login" for 127.0.0.1 at 2017-05-19 21:10:27 +0300
Processing by WelcomeController#new as HTML
  Rendered welcome/_form.html.haml (11.1ms)
  Rendered welcome/new.html.haml within layouts/application (16.0ms)
  Rendered application/_navbar_top.html.haml (9.7ms)
  Rendered application/_sidebar.html.haml (10.6ms)
  Rendered application/_flash_messages.html.haml (4.6ms)
Completed 200 OK in 175ms (Views: 115.1ms | ActiveRecord: 5.8ms)


Started POST "/try_login" for 127.0.0.1 at 2017-05-19 21:10:29 +0300
Processing by WelcomeController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AHN3+aU53zTyHoyoc7nhrfnCceREH50DDERmqTzDny3YdQSnkQnNhgwWCxFLXOrRVtpZotX5y8GJvULzcjVZJw==", "email"=>"admin@localhost", "password"=>"[FILTERED]", "remember_me"=>"false", "commit"=>"Войти"}
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = 'admin@localhost'  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mSQL (14.1ms)[0m  [1mUPDATE "users" SET "failed_logins_count" = 0 WHERE "users"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (8.7ms)[0m  UPDATE "users" SET "last_login_at" = '2017-05-19 18:10:29.288228' WHERE "users"."id" = $1  [["id", 1]]
  [1m[36mSQL (9.6ms)[0m  [1mUPDATE "users" SET "last_login_from_ip_address" = '127.0.0.1' WHERE "users"."id" = $1[0m  [["id", 1]]
Redirected to http://localhost:3000/
  [1m[35mSQL (7.8ms)[0m  UPDATE "users" SET "last_activity_at" = '2017-05-19 18:10:29.311524' WHERE "users"."id" = $1  [["id", 1]]
Completed 302 Found in 267ms (ActiveRecord: 42.5ms)


Started GET "/" for 127.0.0.1 at 2017-05-19 21:10:29 +0300
Processing by WelcomeController#index as HTML
  Rendered welcome/index.html.haml within layouts/application (0.1ms)
  Rendered application/_navbar_top.html.haml (2.0ms)
  Rendered application/_sidebar.html.haml (2.8ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (3.3ms)[0m  UPDATE "users" SET "last_activity_at" = '2017-05-19 18:10:29.427058' WHERE "users"."id" = $1  [["id", 1]]
Completed 200 OK in 87ms (Views: 75.9ms | ActiveRecord: 4.1ms)


Started GET "/departments" for 127.0.0.1 at 2017-05-19 21:10:37 +0300
Processing by DepartmentsController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mRoleUser Load (0.7ms)[0m  SELECT  "role_users".* FROM "role_users" WHERE "role_users"."user_id" = $1  ORDER BY "role_users"."id" ASC LIMIT 1  [["user_id", 1]]
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT  "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mDepartment Load (0.6ms)[0m  SELECT "departments".* FROM "departments"
  Rendered departments/index.html.haml within layouts/application (7.5ms)
  Rendered application/_navbar_top.html.haml (2.3ms)
  Rendered application/_sidebar.html.haml (2.8ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  [1m[36mSQL (15.5ms)[0m  [1mUPDATE "users" SET "last_activity_at" = '2017-05-19 18:10:37.370046' WHERE "users"."id" = $1[0m  [["id", 1]]
Completed 200 OK in 210ms (Views: 98.3ms | ActiveRecord: 23.3ms)


Started GET "/departments/new" for 127.0.0.1 at 2017-05-19 21:10:41 +0300
Processing by DepartmentsController#new as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mRoleUser Load (0.8ms)[0m  [1mSELECT  "role_users".* FROM "role_users" WHERE "role_users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mRoleUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "role_users" WHERE "role_users"."user_id" = $1 AND "role_users"."id" = $2 LIMIT 1  [["user_id", 1], ["id", 1]]
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT  "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered departments/_form.html.haml (35.7ms)
  Rendered departments/new.html.haml within layouts/application (41.1ms)
  Rendered application/_navbar_top.html.haml (2.1ms)
  Rendered application/_sidebar.html.haml (2.8ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  [1m[35mSQL (12.8ms)[0m  UPDATE "users" SET "last_activity_at" = '2017-05-19 18:10:41.166458' WHERE "users"."id" = $1  [["id", 1]]
Completed 200 OK in 168ms (Views: 128.3ms | ActiveRecord: 16.8ms)


Started GET "/departments/new" for 127.0.0.1 at 2017-05-19 21:11:14 +0300
Processing by DepartmentsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mRoleUser Load (0.6ms)[0m  SELECT  "role_users".* FROM "role_users" WHERE "role_users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mRoleUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "role_users" WHERE "role_users"."user_id" = $1 AND "role_users"."id" = $2 LIMIT 1[0m  [["user_id", 1], ["id", 1]]
  [1m[35mRole Load (0.6ms)[0m  SELECT  "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered departments/_form.html.haml (1.5ms)
  Rendered departments/new.html.haml within layouts/application (2.7ms)
  Rendered application/_navbar_top.html.haml (2.2ms)
  Rendered application/_sidebar.html.haml (3.0ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  [1m[36mSQL (18.2ms)[0m  [1mUPDATE "users" SET "last_activity_at" = '2017-05-19 18:11:14.421051' WHERE "users"."id" = $1[0m  [["id", 1]]
Completed 200 OK in 128ms (Views: 96.6ms | ActiveRecord: 20.9ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-19 21:11:21 +0300
Processing by WorkersController#index as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mRoleUser Load (0.6ms)[0m  [1mSELECT  "role_users".* FROM "role_users" WHERE "role_users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mRoleUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "role_users" WHERE "role_users"."user_id" = $1 AND "role_users"."id" = $2 LIMIT 1  [["user_id", 1], ["id", 1]]
  [1m[36mRole Load (0.4ms)[0m  [1mSELECT  "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mWorker Load (1.1ms)[0m  SELECT "workers".* FROM "workers"
  Rendered workers/index.html.haml within layouts/application (11.6ms)
  Rendered application/_navbar_top.html.haml (2.4ms)
  Rendered application/_sidebar.html.haml (2.9ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  [1m[36mSQL (17.4ms)[0m  [1mUPDATE "users" SET "last_activity_at" = '2017-05-19 18:11:21.189688' WHERE "users"."id" = $1[0m  [["id", 1]]
Completed 200 OK in 141ms (Views: 99.7ms | ActiveRecord: 22.3ms)
  [1m[36m (77.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (72.1ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateVersions (20151203152020)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (133.3ms)[0m  [1mCREATE TABLE "versions" ("id" serial primary key, "item_type" character varying NOT NULL, "item_id" integer NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp) [0m
  [1m[35m (40.2ms)[0m  CREATE  INDEX  "index_versions_on_item_type_and_item_id" ON "versions"  ("item_type", "item_id")
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151203152020"]]
  [1m[35m (17.8ms)[0m  COMMIT
Migrating to CreateDelayedJobs (20151203154714)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (117.4ms)[0m  CREATE TABLE "delayed_jobs" ("id" serial primary key, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" timestamp, "locked_at" timestamp, "failed_at" timestamp, "locked_by" character varying, "queue" character varying, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (56.4ms)[0m  [1mCREATE  INDEX  "delayed_jobs_priority" ON "delayed_jobs"  ("priority", "run_at")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151203154714"]]
  [1m[36m (23.8ms)[0m  [1mCOMMIT[0m
Migrating to SorceryCore (20151204090515)
  [1m[35m (0.4ms)[0m  BEGIN
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /home/oag2/Ruby on Rails/base_app_m-master/db/migrate/20151204090515_sorcery_core.rb:8)
  [1m[36m (81.2ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying NOT NULL, "crypted_password" character varying, "salt" character varying, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (62.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090515"]]
  [1m[35m (22.6ms)[0m  COMMIT
Migrating to SorceryRememberMe (20151204090516)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "users" ADD "remember_me_token" character varying
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD "remember_me_token_expires_at" timestamp[0m
  [1m[35m (54.3ms)[0m  CREATE  INDEX  "index_users_on_remember_me_token" ON "users"  ("remember_me_token")
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090516"]]
  [1m[35m (21.4ms)[0m  COMMIT
Migrating to SorceryResetPassword (20151204090517)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "users" ADD "reset_password_token" character varying
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD "reset_password_token_expires_at" timestamp[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD "reset_password_email_sent_at" timestamp
  [1m[36m (56.8ms)[0m  [1mCREATE  INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090517"]]
  [1m[36m (10.4ms)[0m  [1mCOMMIT[0m
Migrating to SorceryUserActivation (20151204090518)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "users" ADD "activation_state" character varying[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "users" ADD "activation_token" character varying
  [1m[36m (0.9ms)[0m  [1mALTER TABLE "users" ADD "activation_token_expires_at" timestamp[0m
  [1m[35m (52.9ms)[0m  CREATE  INDEX  "index_users_on_activation_token" ON "users"  ("activation_token")
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090518"]]
  [1m[35m (21.4ms)[0m  COMMIT
Migrating to SorceryBruteForceProtection (20151204090519)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (287.0ms)[0m  ALTER TABLE "users" ADD "failed_logins_count" integer DEFAULT 0
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD "lock_expires_at" timestamp[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "unlock_token" character varying
  [1m[36m (37.0ms)[0m  [1mCREATE  INDEX  "index_users_on_unlock_token" ON "users"  ("unlock_token")[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090519"]]
  [1m[36m (19.2ms)[0m  [1mCOMMIT[0m
Migrating to SorceryActivityLogging (20151204090520)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "users" ADD "last_login_at" timestamp[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "last_logout_at" timestamp
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "last_activity_at" timestamp[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "last_login_from_ip_address" character varying
  [1m[36m (55.7ms)[0m  [1mCREATE  INDEX  "index_users_on_last_logout_at_and_last_activity_at" ON "users"  ("last_logout_at", "last_activity_at")[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090520"]]
  [1m[36m (18.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateRoles (20170409204945)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (111.2ms)[0m  [1mCREATE TABLE "roles" ("id" serial primary key, "name" character varying NOT NULL, "info" character varying NOT NULL, "full_info" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (62.4ms)[0m  CREATE UNIQUE INDEX  "index_roles_on_name" ON "roles"  ("name")
  [1m[36m (41.4ms)[0m  [1mCREATE UNIQUE INDEX  "index_roles_on_info" ON "roles"  ("info")[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170409204945"]]
  [1m[36m (14.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateRoleUsers (20170409205031)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (90.9ms)[0m  [1mCREATE TABLE "role_users" ("id" serial primary key, "role_id" integer NOT NULL, "user_id" integer NOT NULL, "data" json, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (51.7ms)[0m  CREATE  INDEX  "index_role_users_on_role_id" ON "role_users"  ("role_id")
  [1m[36m (41.4ms)[0m  [1mCREATE  INDEX  "index_role_users_on_user_id" ON "role_users"  ("user_id")[0m
  [1m[35m (4.1ms)[0m  ALTER TABLE "role_users" ADD CONSTRAINT "fk_rails_d517f3214f"
FOREIGN KEY ("role_id")
  REFERENCES "roles" ("id")

  [1m[36m (3.3ms)[0m  [1mALTER TABLE "role_users" ADD CONSTRAINT "fk_rails_d225876829"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170409205031"]]
  [1m[36m (15.2ms)[0m  [1mCOMMIT[0m
Migrating to AddBirthdayToUser (20170501085108)
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "users" ADD "birthday" date[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170501085108"]]
  [1m[36m (3.1ms)[0m  [1mCOMMIT[0m
Migrating to CreateDepartments (20170519175107)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (91.2ms)[0m  [1mCREATE TABLE "departments" ("id" serial primary key, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175107"]]
  [1m[36m (23.6ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkers (20170519175219)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (92.6ms)[0m  [1mCREATE TABLE "workers" ("id" serial primary key, "sn" character varying NOT NULL, "fn" character varying NOT NULL, "ln" character varying NOT NULL, "passport" character varying NOT NULL, "inn" character varying NOT NULL, "birthday" date NOT NULL, "position" character varying NOT NULL, "department_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.8ms)[0m  CREATE  INDEX  "index_workers_on_department_id" ON "workers"  ("department_id")
  [1m[36m (2.7ms)[0m  [1mALTER TABLE "workers" ADD CONSTRAINT "fk_rails_a707a1612d"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175219"]]
  [1m[36m (18.6ms)[0m  [1mCOMMIT[0m
Migrating to CreateProjects (20170519175231)
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (125.5ms)[0m  [1mCREATE TABLE "projects" ("id" serial primary key, "name" character varying NOT NULL, "start" date NOT NULL, "end" date NOT NULL, "price" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175231"]]
  [1m[36m (22.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkerProjects (20170519175250)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (49.1ms)[0m  [1mCREATE TABLE "worker_projects" ("id" serial primary key, "worker_id" integer NOT NULL, "project_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.8ms)[0m  CREATE  INDEX  "index_worker_projects_on_worker_id" ON "worker_projects"  ("worker_id")
  [1m[36m (55.6ms)[0m  [1mCREATE  INDEX  "index_worker_projects_on_project_id" ON "worker_projects"  ("project_id")[0m
  [1m[35m (2.7ms)[0m  ALTER TABLE "worker_projects" ADD CONSTRAINT "fk_rails_7c9f8f33e0"
FOREIGN KEY ("worker_id")
  REFERENCES "workers" ("id")

  [1m[36m (2.2ms)[0m  [1mALTER TABLE "worker_projects" ADD CONSTRAINT "fk_rails_c5fb282d59"
FOREIGN KEY ("project_id")
  REFERENCES "projects" ("id")
[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175250"]]
  [1m[36m (33.5ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.7ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (5.1ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'delayed_jobs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.3ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'departments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'projects'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.9ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'role_users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'roles'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'versions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'worker_projects'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.3ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'workers'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.6ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"


Started GET "/workers" for 127.0.0.1 at 2017-05-19 21:13:04 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by WorkersController#index as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
Redirected to http://localhost:3000/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 63ms (ActiveRecord: 2.6ms)


Started GET "/login" for 127.0.0.1 at 2017-05-19 21:13:04 +0300
Processing by WelcomeController#new as HTML
  Rendered welcome/_form.html.haml (11.6ms)
  Rendered welcome/new.html.haml within layouts/application (711.7ms)
  Rendered application/_navbar_top.html.haml (12.1ms)
  Rendered application/_sidebar.html.haml (19.0ms)
  Rendered application/_flash_messages.html.haml (5.8ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 1259ms (Views: 1220.0ms | ActiveRecord: 3.4ms)


Started GET "/assets/theme.self-c455751eb6d553c2ff08285b8344c15975a79e37cb7e17faafcabd342a611a00.css?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/bootstrap-datetimepicker.self-79d1c2e6e8b0d90803cfd9ad1a8bec31d6cde65b41438ec892929ce07f368ac2.css?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/application.self-d885a0a66bd595c10edb24f8879f94e334d88be0730c4d7c7a7b57c731c09037.css?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/jquery.self-bd7ddd393353a8d2480a622e80342adf488fb6006d667e8b42e4c0073393abee.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/jquery.maskedinput.self-4e0cf4cd8f2c531aed9d38ff9537af1065f92408fb369be61ab0c82b40000ca8.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/turbolinks.self-c37727e9bd6b2735da5c311aa83fead54ed0be6cc8bd9a65309e9c5abe2cbfff.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/jquery_ujs.self-784a997f6726036b1993eb2217c9cb558e1cbb801c6da88105588c56f13b466a.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/bootstrap.self-b38817c3e3a3049abb1fc08dd6ae448b23330f8453226efdb074710209474f75.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/bootstrap-growl.min.self-8a40746a094cfdde4b396d4e88457397b744d7042d3cd8f7dd0aaa9c1814a4c5.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/moment.self-c99e0f02d41c61d0fd120e8fde6f9277b7ade69ecdac6c27872f5e631fb6cf38.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/bootstrap-datetimepicker.self-f7eed811e1c58d1cdbc448230279684b07653dcf7d067a676dfa60ad370f8407.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/moment/ru.self-58fad0e6c5e51bdf3f357ccc5e991e7c729463209b9aaaa3cdd88a7cc4d40396.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/departments.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/growl_messages.self-398f787b13e0f4b46ee38392cc4606d6883a92b8f79cd19a9e3c5c4f358cfb0d.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/main.self-3f11260e5064c0e46b8f7eb25e0ff43eb318d677a5628550408e4bffea4df7fc.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/password_resets.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/role_users.self-1878dd443f16e8cfe65a1150cdfbb48d9d1fde90d019b6ad8407f7db197b2934.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/projects.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/roles.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/sidebar.self-9de08734b770e1d724d9ec0f5cc40ed784c495e1f328ac6ad09b33b4ed037919.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/users.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/welcome.self-62fe1ba3a628b58f4fd05bd5c07745afba414a81bf6bcf6667b043c255efe449.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/workers.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/application.self-16c207b3ca1b52afcfc7f4b662487caf1bbe084a6656bb15f693ab9de2d11be7.js?body=1" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/logo-6f1545a4a342de939e2a3a77e7f704975b28d8157a9e4d45050a667eca64a54b.png" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started GET "/assets/gears-c73a2796db66a2ae730c595dc9cddfbbbd319737e0eaa442bf5318c6d538e167.gif" for 127.0.0.1 at 2017-05-19 21:13:06 +0300


Started POST "/try_login" for 127.0.0.1 at 2017-05-19 21:13:08 +0300
Processing by WelcomeController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"xnN/pwMrudGhboDjUSGF9/B6MbXM2QvOlYfg3IDzQ30edQz5NxurY19mB1ppxI6LX2IZ810/XQwQfsSGzgWFdw==", "email"=>"admin@localhost", "password"=>"[FILTERED]", "remember_me"=>"false", "commit"=>"Войти"}
  [1m[35mUser Load (1.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = 'admin@localhost'  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = 'admin@localhost'  ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered welcome/_form.html.haml (1.3ms)
  Rendered welcome/new.html.haml within layouts/application (2.4ms)
  Rendered application/_navbar_top.html.haml (1.9ms)
  Rendered application/_sidebar.html.haml (2.8ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
Completed 200 OK in 669ms (Views: 81.2ms | ActiveRecord: 1.7ms)


Started POST "/try_login" for 127.0.0.1 at 2017-05-19 21:13:10 +0300
Processing by WelcomeController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"/pnrusUm7JG2pHXQIhTiFLXlZFTN4n/+eZGA9hhQH1wmn5jk8Rb+I0is8mka8eloGv1MElwEKTz8aKSsVqbZVg==", "email"=>"admin@localhost", "password"=>"[FILTERED]", "remember_me"=>"false", "commit"=>"Войти"}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = 'admin@localhost'  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = 'admin@localhost'  ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered welcome/_form.html.haml (1.9ms)
  Rendered welcome/new.html.haml within layouts/application (3.3ms)
  Rendered application/_navbar_top.html.haml (1.9ms)
  Rendered application/_sidebar.html.haml (2.8ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
Completed 200 OK in 96ms (Views: 90.4ms | ActiveRecord: 0.9ms)


Started POST "/try_login" for 127.0.0.1 at 2017-05-19 21:13:17 +0300
Processing by WelcomeController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Ky7zuYBUtyUimoel8RoHplkZbyEE2bXj4g7LGViga+zzKIDntGSll9ySABzJ/wza9gFHZ5U/4yFn9+9DFlat5g==", "email"=>"admin@localhost", "password"=>"[FILTERED]", "remember_me"=>"false", "commit"=>"Войти"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = 'admin@localhost'  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = 'admin@localhost'  ORDER BY "users"."id" ASC LIMIT 1[0m
  Rendered welcome/_form.html.haml (2.5ms)
  Rendered welcome/new.html.haml within layouts/application (3.7ms)
  Rendered application/_navbar_top.html.haml (2.1ms)
  Rendered application/_sidebar.html.haml (2.9ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
Completed 200 OK in 93ms (Views: 88.5ms | ActiveRecord: 0.8ms)


Started GET "/password_resets/new" for 127.0.0.1 at 2017-05-19 21:13:22 +0300
Processing by PasswordResetsController#new as HTML
  Rendered password_resets/new.html.haml within layouts/application (6.3ms)
  Rendered application/_navbar_top.html.haml (1.9ms)
  Rendered application/_sidebar.html.haml (2.8ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
Completed 200 OK in 93ms (Views: 90.5ms | ActiveRecord: 0.7ms)


Started GET "/assets/favicon-9fb30ab423ede0570894e6820d5b3a598b4a1dbbc9471a98f4d6b42cbe696bd7.ico" for 127.0.0.1 at 2017-05-19 21:13:24 +0300


Started POST "/try_login" for 127.0.0.1 at 2017-05-19 21:13:29 +0300
Processing by WelcomeController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"GG06KqNB7OxTR+gHHfSnQmxqyV5CXjBCQbygie24eQPAa0l0l3H+Xq1Pb74lEaw+w3LhGNO4ZoDERYTTo06/CQ==", "email"=>"admin@localhost", "password"=>"[FILTERED]", "remember_me"=>"false", "commit"=>"Войти"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = 'admin@localhost'  ORDER BY "users"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = 'admin@localhost'  ORDER BY "users"."id" ASC LIMIT 1
  Rendered welcome/_form.html.haml (1.8ms)
  Rendered welcome/new.html.haml within layouts/application (3.3ms)
  Rendered application/_navbar_top.html.haml (2.1ms)
  Rendered application/_sidebar.html.haml (2.9ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
Completed 200 OK in 101ms (Views: 96.3ms | ActiveRecord: 0.8ms)
  [1m[36m (70.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (73.0ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateVersions (20151203152020)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (133.1ms)[0m  [1mCREATE TABLE "versions" ("id" serial primary key, "item_type" character varying NOT NULL, "item_id" integer NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp) [0m
  [1m[35m (40.4ms)[0m  CREATE  INDEX  "index_versions_on_item_type_and_item_id" ON "versions"  ("item_type", "item_id")
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151203152020"]]
  [1m[35m (23.2ms)[0m  COMMIT
Migrating to CreateDelayedJobs (20151203154714)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (119.7ms)[0m  CREATE TABLE "delayed_jobs" ("id" serial primary key, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" timestamp, "locked_at" timestamp, "failed_at" timestamp, "locked_by" character varying, "queue" character varying, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (40.0ms)[0m  [1mCREATE  INDEX  "delayed_jobs_priority" ON "delayed_jobs"  ("priority", "run_at")[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151203154714"]]
  [1m[36m (24.8ms)[0m  [1mCOMMIT[0m
Migrating to SorceryCore (20151204090515)
  [1m[35m (0.5ms)[0m  BEGIN
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /home/oag2/Ruby on Rails/base_app_m-master/db/migrate/20151204090515_sorcery_core.rb:8)
  [1m[36m (90.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying NOT NULL, "crypted_password" character varying, "salt" character varying, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (62.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090515"]]
  [1m[35m (23.4ms)[0m  COMMIT
Migrating to SorceryRememberMe (20151204090516)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "users" ADD "remember_me_token" character varying
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "users" ADD "remember_me_token_expires_at" timestamp[0m
  [1m[35m (52.5ms)[0m  CREATE  INDEX  "index_users_on_remember_me_token" ON "users"  ("remember_me_token")
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090516"]]
  [1m[35m (23.1ms)[0m  COMMIT
Migrating to SorceryResetPassword (20151204090517)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "users" ADD "reset_password_token" character varying
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "users" ADD "reset_password_token_expires_at" timestamp[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "users" ADD "reset_password_email_sent_at" timestamp
  [1m[36m (40.4ms)[0m  [1mCREATE  INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090517"]]
  [1m[36m (21.9ms)[0m  [1mCOMMIT[0m
Migrating to SorceryUserActivation (20151204090518)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "users" ADD "activation_state" character varying[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "activation_token" character varying
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "activation_token_expires_at" timestamp[0m
  [1m[35m (53.8ms)[0m  CREATE  INDEX  "index_users_on_activation_token" ON "users"  ("activation_token")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090518"]]
  [1m[35m (23.2ms)[0m  COMMIT
Migrating to SorceryBruteForceProtection (20151204090519)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (330.0ms)[0m  ALTER TABLE "users" ADD "failed_logins_count" integer DEFAULT 0
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "users" ADD "lock_expires_at" timestamp[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "users" ADD "unlock_token" character varying
  [1m[36m (48.4ms)[0m  [1mCREATE  INDEX  "index_users_on_unlock_token" ON "users"  ("unlock_token")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090519"]]
  [1m[36m (21.6ms)[0m  [1mCOMMIT[0m
Migrating to SorceryActivityLogging (20151204090520)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mALTER TABLE "users" ADD "last_login_at" timestamp[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "users" ADD "last_logout_at" timestamp
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "users" ADD "last_activity_at" timestamp[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "users" ADD "last_login_from_ip_address" character varying
  [1m[36m (52.9ms)[0m  [1mCREATE  INDEX  "index_users_on_last_logout_at_and_last_activity_at" ON "users"  ("last_logout_at", "last_activity_at")[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090520"]]
  [1m[36m (20.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateRoles (20170409204945)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (106.3ms)[0m  [1mCREATE TABLE "roles" ("id" serial primary key, "name" character varying NOT NULL, "info" character varying NOT NULL, "full_info" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.3ms)[0m  CREATE UNIQUE INDEX  "index_roles_on_name" ON "roles"  ("name")
  [1m[36m (42.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_roles_on_info" ON "roles"  ("info")[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170409204945"]]
  [1m[36m (18.2ms)[0m  [1mCOMMIT[0m
Migrating to CreateRoleUsers (20170409205031)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (120.7ms)[0m  [1mCREATE TABLE "role_users" ("id" serial primary key, "role_id" integer NOT NULL, "user_id" integer NOT NULL, "data" json, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (29.0ms)[0m  CREATE  INDEX  "index_role_users_on_role_id" ON "role_users"  ("role_id")
  [1m[36m (40.3ms)[0m  [1mCREATE  INDEX  "index_role_users_on_user_id" ON "role_users"  ("user_id")[0m
  [1m[35m (4.1ms)[0m  ALTER TABLE "role_users" ADD CONSTRAINT "fk_rails_d517f3214f"
FOREIGN KEY ("role_id")
  REFERENCES "roles" ("id")

  [1m[36m (3.5ms)[0m  [1mALTER TABLE "role_users" ADD CONSTRAINT "fk_rails_d225876829"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170409205031"]]
  [1m[36m (19.2ms)[0m  [1mCOMMIT[0m
Migrating to AddBirthdayToUser (20170501085108)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "users" ADD "birthday" date[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170501085108"]]
  [1m[36m (4.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateDepartments (20170519175107)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (132.4ms)[0m  [1mCREATE TABLE "departments" ("id" serial primary key, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175107"]]
  [1m[36m (17.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkers (20170519175219)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (100.0ms)[0m  [1mCREATE TABLE "workers" ("id" serial primary key, "sn" character varying NOT NULL, "fn" character varying NOT NULL, "ln" character varying NOT NULL, "passport" character varying NOT NULL, "inn" character varying NOT NULL, "birthday" date NOT NULL, "position" character varying NOT NULL, "department_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (59.2ms)[0m  CREATE  INDEX  "index_workers_on_department_id" ON "workers"  ("department_id")
  [1m[36m (2.5ms)[0m  [1mALTER TABLE "workers" ADD CONSTRAINT "fk_rails_a707a1612d"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175219"]]
  [1m[36m (13.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateProjects (20170519175231)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (100.9ms)[0m  [1mCREATE TABLE "projects" ("id" serial primary key, "name" character varying NOT NULL, "start" date NOT NULL, "end" date NOT NULL, "price" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175231"]]
  [1m[36m (25.1ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkerProjects (20170519175250)
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (56.7ms)[0m  [1mCREATE TABLE "worker_projects" ("id" serial primary key, "worker_id" integer NOT NULL, "project_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (62.4ms)[0m  CREATE  INDEX  "index_worker_projects_on_worker_id" ON "worker_projects"  ("worker_id")
  [1m[36m (40.3ms)[0m  [1mCREATE  INDEX  "index_worker_projects_on_project_id" ON "worker_projects"  ("project_id")[0m
  [1m[35m (2.4ms)[0m  ALTER TABLE "worker_projects" ADD CONSTRAINT "fk_rails_7c9f8f33e0"
FOREIGN KEY ("worker_id")
  REFERENCES "workers" ("id")

  [1m[36m (2.1ms)[0m  [1mALTER TABLE "worker_projects" ADD CONSTRAINT "fk_rails_c5fb282d59"
FOREIGN KEY ("project_id")
  REFERENCES "projects" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175250"]]
  [1m[36m (19.3ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (4.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'delayed_jobs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.0ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'departments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.3ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'projects'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'role_users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'roles'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'versions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'worker_projects'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'workers'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (199.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (72.1ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateVersions (20151203152020)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (124.7ms)[0m  [1mCREATE TABLE "versions" ("id" serial primary key, "item_type" character varying NOT NULL, "item_id" integer NOT NULL, "event" character varying NOT NULL, "whodunnit" character varying, "object" text, "created_at" timestamp) [0m
  [1m[35m (52.8ms)[0m  CREATE  INDEX  "index_versions_on_item_type_and_item_id" ON "versions"  ("item_type", "item_id")
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151203152020"]]
  [1m[35m (16.7ms)[0m  COMMIT
Migrating to CreateDelayedJobs (20151203154714)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (115.9ms)[0m  CREATE TABLE "delayed_jobs" ("id" serial primary key, "priority" integer DEFAULT 0 NOT NULL, "attempts" integer DEFAULT 0 NOT NULL, "handler" text NOT NULL, "last_error" text, "run_at" timestamp, "locked_at" timestamp, "failed_at" timestamp, "locked_by" character varying, "queue" character varying, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (50.2ms)[0m  [1mCREATE  INDEX  "delayed_jobs_priority" ON "delayed_jobs"  ("priority", "run_at")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151203154714"]]
  [1m[36m (19.9ms)[0m  [1mCOMMIT[0m
Migrating to SorceryCore (20151204090515)
  [1m[35m (0.5ms)[0m  BEGIN
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /home/oag2/Ruby on Rails/base_app_m-master/db/migrate/20151204090515_sorcery_core.rb:8)
  [1m[36m (97.0ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying NOT NULL, "crypted_password" character varying, "salt" character varying, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (61.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090515"]]
  [1m[35m (6.5ms)[0m  COMMIT
Migrating to SorceryRememberMe (20151204090516)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "users" ADD "remember_me_token" character varying
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "users" ADD "remember_me_token_expires_at" timestamp[0m
  [1m[35m (48.2ms)[0m  CREATE  INDEX  "index_users_on_remember_me_token" ON "users"  ("remember_me_token")
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090516"]]
  [1m[35m (17.2ms)[0m  COMMIT
Migrating to SorceryResetPassword (20151204090517)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "users" ADD "reset_password_token" character varying
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "reset_password_token_expires_at" timestamp[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "reset_password_email_sent_at" timestamp
  [1m[36m (59.3ms)[0m  [1mCREATE  INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090517"]]
  [1m[36m (16.5ms)[0m  [1mCOMMIT[0m
Migrating to SorceryUserActivation (20151204090518)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "users" ADD "activation_state" character varying[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD "activation_token" character varying
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD "activation_token_expires_at" timestamp[0m
  [1m[35m (72.6ms)[0m  CREATE  INDEX  "index_users_on_activation_token" ON "users"  ("activation_token")
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20151204090518"]]
  [1m[35m (16.1ms)[0m  COMMIT
Migrating to SorceryBruteForceProtection (20151204090519)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (292.2ms)[0m  ALTER TABLE "users" ADD "failed_logins_count" integer DEFAULT 0
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "users" ADD "lock_expires_at" timestamp[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "unlock_token" character varying
  [1m[36m (47.7ms)[0m  [1mCREATE  INDEX  "index_users_on_unlock_token" ON "users"  ("unlock_token")[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090519"]]
  [1m[36m (26.1ms)[0m  [1mCOMMIT[0m
Migrating to SorceryActivityLogging (20151204090520)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "users" ADD "last_login_at" timestamp[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "users" ADD "last_logout_at" timestamp
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "users" ADD "last_activity_at" timestamp[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "users" ADD "last_login_from_ip_address" character varying
  [1m[36m (47.8ms)[0m  [1mCREATE  INDEX  "index_users_on_last_logout_at_and_last_activity_at" ON "users"  ("last_logout_at", "last_activity_at")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20151204090520"]]
  [1m[36m (14.1ms)[0m  [1mCOMMIT[0m
Migrating to CreateRoles (20170409204945)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (103.4ms)[0m  [1mCREATE TABLE "roles" ("id" serial primary key, "name" character varying NOT NULL, "info" character varying NOT NULL, "full_info" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (41.1ms)[0m  CREATE UNIQUE INDEX  "index_roles_on_name" ON "roles"  ("name")
  [1m[36m (62.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_roles_on_info" ON "roles"  ("info")[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170409204945"]]
  [1m[36m (22.9ms)[0m  [1mCOMMIT[0m
Migrating to CreateRoleUsers (20170409205031)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (104.1ms)[0m  [1mCREATE TABLE "role_users" ("id" serial primary key, "role_id" integer NOT NULL, "user_id" integer NOT NULL, "data" json, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (56.1ms)[0m  CREATE  INDEX  "index_role_users_on_role_id" ON "role_users"  ("role_id")
  [1m[36m (61.3ms)[0m  [1mCREATE  INDEX  "index_role_users_on_user_id" ON "role_users"  ("user_id")[0m
  [1m[35m (3.2ms)[0m  ALTER TABLE "role_users" ADD CONSTRAINT "fk_rails_d517f3214f"
FOREIGN KEY ("role_id")
  REFERENCES "roles" ("id")

  [1m[36m (2.4ms)[0m  [1mALTER TABLE "role_users" ADD CONSTRAINT "fk_rails_d225876829"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170409205031"]]
  [1m[36m (13.6ms)[0m  [1mCOMMIT[0m
Migrating to AddBirthdayToUser (20170501085108)
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "users" ADD "birthday" date[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170501085108"]]
  [1m[36m (4.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateDepartments (20170519175107)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (85.4ms)[0m  [1mCREATE TABLE "departments" ("id" serial primary key, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175107"]]
  [1m[36m (18.9ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkers (20170519175219)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (86.7ms)[0m  [1mCREATE TABLE "workers" ("id" serial primary key, "sn" character varying NOT NULL, "fn" character varying NOT NULL, "ln" character varying NOT NULL, "passport" character varying NOT NULL, "inn" character varying NOT NULL, "birthday" date NOT NULL, "position" character varying NOT NULL, "department_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.0ms)[0m  CREATE  INDEX  "index_workers_on_department_id" ON "workers"  ("department_id")
  [1m[36m (2.6ms)[0m  [1mALTER TABLE "workers" ADD CONSTRAINT "fk_rails_a707a1612d"
FOREIGN KEY ("department_id")
  REFERENCES "departments" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175219"]]
  [1m[36m (25.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateProjects (20170519175231)
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (96.8ms)[0m  [1mCREATE TABLE "projects" ("id" serial primary key, "name" character varying NOT NULL, "start" date NOT NULL, "end" date NOT NULL, "price" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175231"]]
  [1m[36m (16.9ms)[0m  [1mCOMMIT[0m
Migrating to CreateWorkerProjects (20170519175250)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (42.7ms)[0m  [1mCREATE TABLE "worker_projects" ("id" serial primary key, "worker_id" integer NOT NULL, "project_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.3ms)[0m  CREATE  INDEX  "index_worker_projects_on_worker_id" ON "worker_projects"  ("worker_id")
  [1m[36m (75.0ms)[0m  [1mCREATE  INDEX  "index_worker_projects_on_project_id" ON "worker_projects"  ("project_id")[0m
  [1m[35m (2.7ms)[0m  ALTER TABLE "worker_projects" ADD CONSTRAINT "fk_rails_7c9f8f33e0"
FOREIGN KEY ("worker_id")
  REFERENCES "workers" ("id")

  [1m[36m (2.6ms)[0m  [1mALTER TABLE "worker_projects" ADD CONSTRAINT "fk_rails_c5fb282d59"
FOREIGN KEY ("project_id")
  REFERENCES "projects" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170519175250"]]
  [1m[36m (20.0ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (4.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'delayed_jobs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.1ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'departments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'projects'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'role_users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'roles'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (3.8ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.3ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'versions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'worker_projects'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.2ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'workers'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT 1[0m  [["email", "admin@localhost"]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('admin@localhost') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("email", "salt", "crypted_password", "created_at", "updated_at", "activation_token", "activation_state") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["email", "admin@localhost"], ["salt", "xeetihp9KyXuYBbvNVby"], ["crypted_password", "$2a$10$4P.10c3M89L0Hm9aSbVbh.HK.cpGTB0YrSEm3NvCnEf/8DIo9URdG"], ["created_at", "2017-05-19 18:15:03.019714"], ["updated_at", "2017-05-19 18:15:03.019714"], ["activation_token", "-RrpyJkzwNZyfxfeDHiV"], ["activation_state", "pending"]]
  Rendered user_mailer/activation_needed_email.html.haml within layouts/mailer (7.9ms)
  Rendered user_mailer/activation_needed_email.text.haml within layouts/mailer (3.2ms)

UserMailer#activation_needed_email: processed outbound mail in 317.4ms

Sent mail to admin@localhost (14.7ms)
Date: Fri, 19 May 2017 21:15:03 +0300
From: from@example.com
To: admin@localhost
Message-ID: <591f3627556e7_40b82adcb21539709194b@oag2-Lenovo-G505s.mail>
Subject: Welcome to My Awesome Site
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f362752d26_40b82adcb21539709187a";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f362752d26_40b82adcb21539709187a
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Welcome to example.com,
admin@localhost
You have successfully signed up to example.com,
your username is:
admin@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/-RrpyJkzwNZyfxfeDHiV/activate.
Thanks for joining and have a great day!


----==_mimepart_591f362752d26_40b82adcb21539709187a
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Welcome to example.com,
admin@localhost
You have successfully signed up to example.com,
your username is:
admin@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/-RrpyJkzwNZyfxfeDHiV/activate.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f362752d26_40b82adcb21539709187a--

  [1m[36m (34.2ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: The method `login_path` cannot be used here as a full URL is required. Use `login_url` instead. (called from activation_success_email at /home/oag2/Ruby on Rails/base_app_m-master/app/mailers/user_mailer.rb:11)
  Rendered user_mailer/activation_success_email.html.haml within layouts/mailer (3.8ms)
  Rendered user_mailer/activation_success_email.text.haml within layouts/mailer (3.0ms)

UserMailer#activation_success_email: processed outbound mail in 23.2ms

Sent mail to admin@localhost (7.1ms)
Date: Fri, 19 May 2017 21:15:03 +0300
From: from@example.com
To: admin@localhost
Message-ID: <591f362766887_40b82adcb215397092188@oag2-Lenovo-G505s.mail>
Subject: Your account is now activated
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f362765765_40b82adcb215397092060";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f362765765_40b82adcb215397092060
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Congratz,
admin@localhost
You have successfully activated your example.com account,
your username is:
admin@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!


----==_mimepart_591f362765765_40b82adcb215397092060
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Congratz,
admin@localhost
You have successfully activated your example.com account,
your username is:
admin@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f362765765_40b82adcb215397092060--

  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "activation_token" = $1, "activation_state" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["activation_token", nil], ["activation_state", "active"], ["updated_at", "2017-05-19 18:15:03.426355"], ["id", 1]]
  [1m[35m (7.9ms)[0m  COMMIT
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT 1[0m  [["email", "user@localhost"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('user@localhost') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("email", "salt", "crypted_password", "created_at", "updated_at", "activation_token", "activation_state") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["email", "user@localhost"], ["salt", "yyUWPKuu-p8VByKkKXQx"], ["crypted_password", "$2a$10$oAvsbK9sIsX/7zOVXBKLqetitHQzU/3nN5rB9kyJMf1VVWlYSbekK"], ["created_at", "2017-05-19 18:15:03.648631"], ["updated_at", "2017-05-19 18:15:03.648631"], ["activation_token", "L5bhgE7ozxsvkEPkkvfp"], ["activation_state", "pending"]]
  Rendered user_mailer/activation_needed_email.html.haml within layouts/mailer (0.2ms)
  Rendered user_mailer/activation_needed_email.text.haml within layouts/mailer (0.1ms)

UserMailer#activation_needed_email: processed outbound mail in 13.7ms

Sent mail to user@localhost (6.8ms)
Date: Fri, 19 May 2017 21:15:03 +0300
From: from@example.com
To: user@localhost
Message-ID: <591f3627a2ec6_40b82adcb2153970923c4@oag2-Lenovo-G505s.mail>
Subject: Welcome to My Awesome Site
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f3627a1b99_40b82adcb2153970922af";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f3627a1b99_40b82adcb2153970922af
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Welcome to example.com,
user@localhost
You have successfully signed up to example.com,
your username is:
user@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/L5bhgE7ozxsvkEPkkvfp/activate.
Thanks for joining and have a great day!


----==_mimepart_591f3627a1b99_40b82adcb2153970922af
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Welcome to example.com,
user@localhost
You have successfully signed up to example.com,
your username is:
user@localhost.
To login to the site, just follow this link:
http://localhost:3000/users/L5bhgE7ozxsvkEPkkvfp/activate.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f3627a1b99_40b82adcb2153970922af--

  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: The method `login_path` cannot be used here as a full URL is required. Use `login_url` instead. (called from activation_success_email at /home/oag2/Ruby on Rails/base_app_m-master/app/mailers/user_mailer.rb:11)
  Rendered user_mailer/activation_success_email.html.haml within layouts/mailer (0.2ms)
  Rendered user_mailer/activation_success_email.text.haml within layouts/mailer (0.1ms)

UserMailer#activation_success_email: processed outbound mail in 17.3ms

Sent mail to user@localhost (6.9ms)
Date: Fri, 19 May 2017 21:15:03 +0300
From: from@example.com
To: user@localhost
Message-ID: <591f3627ab687_40b82adcb21539709252b@oag2-Lenovo-G505s.mail>
Subject: Your account is now activated
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_591f3627a9fbd_40b82adcb21539709246c";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_591f3627a9fbd_40b82adcb21539709246c
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Congratz,
user@localhost
You have successfully activated your example.com account,
your username is:
user@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!


----==_mimepart_591f3627a9fbd_40b82adcb21539709246c
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<hmtl>
<body>
Congratz,
user@localhost
You have successfully activated your example.com account,
your username is:
user@localhost.
To login to the site, just follow this link:
/login.
Thanks for joining and have a great day!

</body>
</hmtl>

----==_mimepart_591f3627a9fbd_40b82adcb21539709246c--

  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "activation_token" = $1, "activation_state" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["activation_token", nil], ["activation_state", "active"], ["updated_at", "2017-05-19 18:15:03.708175"], ["id", 2]]
  [1m[35m (4.7ms)[0m  COMMIT
  [1m[36mRole Load (0.5ms)[0m  [1mSELECT  "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."info" = $2 AND "roles"."full_info" = $3 LIMIT 1[0m  [["name", "admin"], ["info", "Администратор"], ["full_info", "Администратор системы"]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mRole Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "roles" WHERE "roles"."name" = 'admin' LIMIT 1[0m
  [1m[35mRole Exists (0.6ms)[0m  SELECT  1 AS one FROM "roles" WHERE "roles"."info" = 'Администратор' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "roles" ("name", "info", "full_info", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["info", "Администратор"], ["full_info", "Администратор системы"], ["created_at", "2017-05-19 18:15:03.737717"], ["updated_at", "2017-05-19 18:15:03.737717"]]
  [1m[35m (7.2ms)[0m  COMMIT
  [1m[36mRole Load (0.7ms)[0m  [1mSELECT  "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."info" = $2 AND "roles"."full_info" = $3 LIMIT 1[0m  [["name", "operator"], ["info", "Оператор"], ["full_info", "Оператор"]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mRole Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "roles" WHERE "roles"."name" = 'operator' LIMIT 1[0m
  [1m[35mRole Exists (0.6ms)[0m  SELECT  1 AS one FROM "roles" WHERE "roles"."info" = 'Оператор' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "roles" ("name", "info", "full_info", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "operator"], ["info", "Оператор"], ["full_info", "Оператор"], ["created_at", "2017-05-19 18:15:03.756299"], ["updated_at", "2017-05-19 18:15:03.756299"]]
  [1m[35m (11.9ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "role_users" ("role_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["role_id", 1], ["user_id", 1], ["created_at", "2017-05-19 18:15:03.798295"], ["updated_at", "2017-05-19 18:15:03.798295"]]
  [1m[36m (12.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "role_users" ("role_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["role_id", 2], ["user_id", 2], ["created_at", "2017-05-19 18:15:03.817520"], ["updated_at", "2017-05-19 18:15:03.817520"]]
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mWorker Exists (0.5ms)[0m  SELECT  1 AS one FROM "workers" WHERE "workers"."passport" = '0123456789' LIMIT 1
  [1m[36mWorker Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "workers" WHERE "workers"."inn" = '012345678901' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "workers" ("fn", "sn", "ln", "passport", "inn", "birthday", "position", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["fn", "fn"], ["sn", "sn"], ["ln", "ln"], ["passport", "0123456789"], ["inn", "012345678901"], ["birthday", "1996-04-07"], ["position", "position"], ["created_at", "2017-05-19 18:15:03.850972"], ["updated_at", "2017-05-19 18:15:03.850972"]]
  [1m[36m (5.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "projects" ("name", "start", "end", "price", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "ProjectName"], ["start", "2017-04-07"], ["end", "2017-05-07"], ["price", 1000], ["created_at", "2017-05-19 18:15:03.876342"], ["updated_at", "2017-05-19 18:15:03.876342"]]
  [1m[35m (12.7ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "departments" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "DepartmentName"], ["created_at", "2017-05-19 18:15:03.904171"], ["updated_at", "2017-05-19 18:15:03.904171"]]
  [1m[36m (8.0ms)[0m  [1mCOMMIT[0m


Started POST "/try_login" for 127.0.0.1 at 2017-05-19 21:15:14 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by WelcomeController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"VEkrfmHviW8/YpLPUTVQTsXAN0j9WvBtWdMbQ8K+jBWMT1ggVd+b3cFqFXZp0FsyatgfDmy8pq/cKj8ZjEhKHw==", "email"=>"admin@localhost", "password"=>"[FILTERED]", "remember_me"=>"false", "commit"=>"Войти"}
  [1m[35mUser Load (1.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = 'admin@localhost'  ORDER BY "users"."id" ASC LIMIT 1
  [1m[36mSQL (15.2ms)[0m  [1mUPDATE "users" SET "failed_logins_count" = 0 WHERE "users"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (9.1ms)[0m  UPDATE "users" SET "last_login_at" = '2017-05-19 18:15:15.198146' WHERE "users"."id" = $1  [["id", 1]]
  [1m[36mSQL (9.5ms)[0m  [1mUPDATE "users" SET "last_login_from_ip_address" = '127.0.0.1' WHERE "users"."id" = $1[0m  [["id", 1]]
Redirected to http://localhost:3000/workers
  [1m[35mSQL (8.0ms)[0m  UPDATE "users" SET "last_activity_at" = '2017-05-19 18:15:15.221674' WHERE "users"."id" = $1  [["id", 1]]
Completed 302 Found in 335ms (ActiveRecord: 48.2ms)


Started GET "/workers" for 127.0.0.1 at 2017-05-19 21:15:15 +0300
Processing by WorkersController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mRoleUser Load (1.1ms)[0m  SELECT  "role_users".* FROM "role_users" WHERE "role_users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mRoleUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "role_users" WHERE "role_users"."user_id" = $1 AND "role_users"."id" = $2 LIMIT 1[0m  [["user_id", 1], ["id", 1]]
  [1m[35mRole Load (1.0ms)[0m  SELECT  "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mWorker Load (1.4ms)[0m  [1mSELECT "workers".* FROM "workers"[0m
  Rendered workers/index.html.haml within layouts/application (40.2ms)
  Rendered application/_navbar_top.html.haml (12.9ms)
  Rendered application/_sidebar.html.haml (14.6ms)
  Rendered application/_flash_messages.html.haml (5.1ms)
  [1m[35mSQL (15.1ms)[0m  UPDATE "users" SET "last_activity_at" = '2017-05-19 18:15:16.501123' WHERE "users"."id" = $1  [["id", 1]]
Completed 200 OK in 1257ms (Views: 1147.1ms | ActiveRecord: 29.8ms)


Started GET "/workers/1" for 127.0.0.1 at 2017-05-19 21:15:23 +0300
Processing by WorkersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mRoleUser Load (0.7ms)[0m  SELECT  "role_users".* FROM "role_users" WHERE "role_users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mRoleUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "role_users" WHERE "role_users"."user_id" = $1 AND "role_users"."id" = $2 LIMIT 1[0m  [["user_id", 1], ["id", 1]]
  [1m[35mRole Load (0.5ms)[0m  SELECT  "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mWorker Load (0.4ms)[0m  [1mSELECT  "workers".* FROM "workers" WHERE "workers"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered workers/show.html.haml within layouts/application (9.0ms)
  Rendered application/_navbar_top.html.haml (17.4ms)
  Rendered application/_sidebar.html.haml (19.3ms)
  Rendered application/_flash_messages.html.haml (5.9ms)
  [1m[35mSQL (10.4ms)[0m  UPDATE "users" SET "last_activity_at" = '2017-05-19 18:15:23.295258' WHERE "users"."id" = $1  [["id", 1]]
Completed 200 OK in 205ms (Views: 181.0ms | ActiveRecord: 13.7ms)


Started GET "/departments" for 127.0.0.1 at 2017-05-19 21:15:44 +0300
Processing by DepartmentsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mRoleUser Load (0.6ms)[0m  SELECT  "role_users".* FROM "role_users" WHERE "role_users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mRoleUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "role_users" WHERE "role_users"."user_id" = $1 AND "role_users"."id" = $2 LIMIT 1[0m  [["user_id", 1], ["id", 1]]
  [1m[35mRole Load (0.6ms)[0m  SELECT  "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mDepartment Load (1.0ms)[0m  [1mSELECT "departments".* FROM "departments"[0m
  Rendered departments/index.html.haml within layouts/application (21.2ms)
  Rendered application/_navbar_top.html.haml (2.0ms)
  Rendered application/_sidebar.html.haml (2.8ms)
  Rendered application/_flash_messages.html.haml (0.1ms)
  [1m[35mSQL (14.1ms)[0m  UPDATE "users" SET "last_activity_at" = '2017-05-19 18:15:44.814792' WHERE "users"."id" = $1  [["id", 1]]
Completed 200 OK in 179ms (Views: 141.9ms | ActiveRecord: 20.4ms)


Started GET "/projects" for 127.0.0.1 at 2017-05-19 21:15:55 +0300
Processing by ProjectsController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mRoleUser Load (0.4ms)[0m  SELECT  "role_users".* FROM "role_users" WHERE "role_users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mRoleUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "role_users" WHERE "role_users"."user_id" = $1 AND "role_users"."id" = $2 LIMIT 1[0m  [["user_id", 1], ["id", 1]]
  [1m[35mRole Load (0.4ms)[0m  SELECT  "roles".* FROM "roles" WHERE "roles"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mProject Load (0.9ms)[0m  [1mSELECT "projects".* FROM "projects"[0m
  Rendered projects/index.html.haml within layouts/application (17.6ms)
  Rendered application/_navbar_top.html.haml (1.9ms)
  Rendered application/_sidebar.html.haml (3.1ms)
  Rendered application/_flash_messages.html.haml (0.2ms)
  [1m[35mSQL (15.5ms)[0m  UPDATE "users" SET "last_activity_at" = '2017-05-19 18:15:55.863392' WHERE "users"."id" = $1  [["id", 1]]
Completed 200 OK in 130ms (Views: 95.2ms | ActiveRecord: 20.2ms)
